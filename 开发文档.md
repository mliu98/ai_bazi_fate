# 🔮 八字缘分测算 · 产品开发文档 v1.1

> **产品类型**：小红书运营 · AI 算命 Web H5  
> **版本**：v1.1 · 适用团队：运营 / 开发  
> **核心变更**：激活码准入 · 免费内容扩充 · 小红书私信交易 · 国产大模型

---

## 一、项目概述

### 1.1 产品定位

「八字缘分测算」是一款面向小红书平台运营的轻量级 AI 算命 Web 工具，核心切入点是现代青年人的恋爱焦虑——用一段简单的互动体验，帮助用户判断自己与对象之间的八字缘分，生成一份通俗易懂、极易分享的匹配度报告。

### 1.2 目标用户

- 18-30 岁年轻女性为主（小红书核心用户群）
- 正在恋爱或暗恋中，对关系走向感到焦虑、不确定
- 对星座、八字、玄学有一定接受度，但不一定深度了解
- 习惯通过小红书获取情感内容，有强分享意愿

### 1.3 核心价值主张

> 「他是不是你命中注定的那个人？输入生日，让八字来告诉你答案。」

大量优质免费内容（缘分亮点、相处建议、专属姻缘签）驱动用户主动分享，形成裂变传播；付费完整版（隐患预警、最佳发展时机）通过激活码在小红书进行交易，形成私域变现闭环。

### 1.4 版本更新说明（v1.0 → v1.1）

| 变更项    | v1.0                       | v1.1                     |
| ------ | -------------------------- | ------------------------ |
| 准入机制   | 无限制免费使用                    | 激活码准入，限制使用次数             |
| 免费内容范围 | 缘分总分 + 五行 + 1条缘分亮点         | 新增：缘分亮点全部 + 相处建议 + 专属姻缘签 |
| 付费墙内容  | 相处建议 / 姻缘签 / 隐患 / 最佳时机     | 仅锁：隐患预警 + 最佳发展时机         |
| 支付方式   | 微信/支付宝 H5                  | 小红书站内私信交易，无需接入支付 SDK     |
| 大模型选型  | Claude Haiku / GPT-4o-mini | 国产大模型（DeepSeek / 通义千问）   |

---

## 二、准入机制 · 激活码系统

### 2.1 机制概述

用户进入应用后，需要输入一个有效的激活码才能开始测算。激活码由运营者在小红书上发放（免费赠送引流 / 付费购买完整版），用户凭码进入系统。这一机制同时实现了流量管控、付费门槛和私域沉淀三个目标。

### 2.2 激活码类型

| 类型 | 权限 | 用途 | 发放场景 |
|------|------|------|----------|
| 体验码（免费） | 测算 1 次，查看完整免费报告 | 引流获客 | 评论区抽奖 / 关注领取 / 博主赠送 |
| 完整码（付费） | 测算 3 次，解锁隐患预警 + 最佳时机 | 主要变现产品 | 小红书私信付款后发送 |
| 无限码（内部） | 不限次数，所有功能 | 运营测试 / KOL 合作 | 内部使用 |

### 2.3 激活码使用流程

1. 用户打开 App → 首页展示产品介绍 + 「输入激活码」入口
2. 输入 8 位激活码（格式：`XXXX-XXXX`）→ 后端校验有效性 + 类型 + 剩余次数
3. 校验通过 → 本地存储 token，进入测算流程
4. 校验失败 → 提示错误原因（无效 / 已过期 / 次数已用完）
5. 每次生成报告消耗 1 次使用次数，耗尽后提示「去小红书获取更多次数」

### 2.4 激活码数据结构

```sql
CREATE TABLE activation_codes (
  code        VARCHAR(9) PRIMARY KEY,   -- 格式 XXXX-XXXX
  type        ENUM('free', 'full', 'unlimited'),
  total_uses  INT NOT NULL,             -- free=1, full=3, unlimited=9999
  used_count  INT DEFAULT 0,
  created_at  TIMESTAMP DEFAULT NOW(),
  expires_at  TIMESTAMP,               -- 默认 30 天后
  note        TEXT                     -- 备注：发给谁 / 哪次活动
);
```

### 2.5 运营端管理

- 提供简单的运营后台页面（`/admin`，密码保护）
- 功能：批量生成激活码、查看已用/未用数量、作废指定码
- 建议每次批量生成 50-100 个体验码用于日常运营，完整码按需生成

> **运营建议**：体验码在小红书评论区「点赞最高的 10 条评论各领一个」，制造稀缺感和互动热度。

---

## 三、功能模块拆解

### 3.1 用户输入流程

整体流程遵循「三步内完成输入」原则，每步只做一件事。

#### Step 1 · 填写生日信息

- 自己的生日：年 / 月 / 日 / 出生时辰（可选「不知道」）
- 对方的生日：同上结构
- 性别选择：我是女生 / 男生

> **设计要点**：日期用滚轮 Picker，时辰用「子时（23-1点）」通俗写法，绝不让用户手动打数字。

#### Step 2 · 玄学小问卷（3-5 题）

增加仪式感与个性化，提升停留时长，同时为大模型生成个性化文案提供素材。

| 题号  | 问题             | 选项                            | 用途     |
| --- | -------------- | ----------------------------- | ------ |
| Q1  | 你们相识的方式是？      | 一见钟情 / 慢慢走进 / 网络相识 / 朋友介绍     | 情感背景标签 |
| Q2  | 你感觉你们之间更像？     | 磁铁相吸 / 相似灵魂 / 互补拼图 / 还没感觉到    | 关系定性   |
| Q3  | 你们有「同步心灵」的瞬间吗？ | 经常有 / 偶尔有 / 没有 / 不确定          | 灵魂契合度  |
| Q4  | 对方对你来说像？       | 太阳 / 月亮 / 北极星 / 流星            | 文案情感锚点 |
| Q5  | 你们认识多久了？       | 不到一个月 / 1-6 个月 / 半年以上 / 还没在一起 | 阶段标签   |

#### Step 3 · 生成报告

- 点击「测算我们的缘分」→ loading 动画（3-5 秒，增加仪式感）
- Loading 页展示八字排盘动效 + 随机玄学语录
- 报告生成后展示完整免费报告 + 付费墙入口

### 3.2 报告内容结构

> **设计逻辑**：免费内容全是正向情绪，让用户看完心情好、主动分享；付费内容是「焦虑触发器」，精准戳中「我们会不会有问题」的不安，付费意愿最强。

| 模块         | 内容说明                                   | 是否免费       | 分享价值  |
| ---------- | -------------------------------------- | ---------- | ----- |
| 🎯 缘分总分    | 醒目百分比（如 87%）+ 等级标签（天作之合 / 良缘相伴 / 平淡有缘） | ✅ 免费       | ⭐⭐⭐⭐⭐ |
| 🔥 五行相合分析  | 双方五行属性展示 + 一句话相合总结                     | ✅ 免费       | ⭐⭐⭐   |
| ✨ 缘分亮点（全部） | 3-5 条正向八字分析                            | ✅ 免费（全部展示） | ⭐⭐⭐⭐  |
| 💕 相处建议    | 基于八字的恋爱相处技巧，口语化表达                      | ✅ 免费       | ⭐⭐⭐⭐  |
| 🌸 专属姻缘签   | 个性化诗意总结文案，带名字、带情绪                      | ✅ 免费       | ⭐⭐⭐⭐⭐ |
| ⚠️ 隐患预警    | 潜在的八字冲突分析                              | 🔒 付费解锁    | —     |
| 📅 最佳发展时机  | 流年推算的吉利节点                              | 🔒 付费解锁    | —     |

### 3.3 分享功能（裂变核心）

#### 分享图片卡片（主要方式）

- 尺寸：1:1 正方形（1080×1080px），适配小红书封面图
- 内容：产品名 + 缘分总分 + 等级标签 + 专属姻缘签文案 + 两人昵称 + 二维码
- 风格：国风玄学感，主色深红/金色，字体仿古，山水或星象背景
- 实现：前端 Canvas 动态渲染，点击「保存图片」下载 PNG，零服务器成本

#### 复制文字（辅助方式）

一键复制约 100 字分享文案：
> 「我和他测出来缘分值 87%，八字说我们是天作之合！姻缘签说：[签文内容]，去测测你的：[链接]」

---

## 四、变现模式 · 小红书私信交易

### 4.1 交易流程

| 步骤      | 操作方 | 行为                                  |
| ------- | --- | ----------------------------------- |
| ① 看到付费墙 | 用户  | 免费报告末尾看到「隐患预警」被遮罩，点击「获取完整版」         |
| ② 引导私信  | 系统  | 弹出引导：「私信小红书 @XXX，备注「完整码」，9.9元获取激活码」 |
| ③ 私信付款  | 用户  | 在小红书私信运营账号完成转账                      |
| ④ 发码    | 运营者 | 收款后从后台复制完整码，私信发给用户                  |
| ⑤ 激活使用  | 用户  | 回到 App 输入激活码，解锁完整报告                 |

### 4.2 定价建议

| 产品       | 定价    | 说明           |
| -------- | ----- | ------------ |
| 体验码（1次）  | ¥2.99 | 小红书商城        |
| 完整码（3次）  | ¥9.99 | 主要变现产品，心理门槛低 |
| 完整码（10次） | ¥19.9 | 适合多次测算或分享给朋友 |
|          |       |              |

### 4.3 运营 SOP

- 每日定时查看小红书私信，收款后 5 分钟内响应发码
- 建立激活码发放记录表（码 + 发给谁 + 时间），方便追踪售后
- 快捷回复话术：「收到！你的激活码是：`XXXX-XXXX`，有效期 5 天，祝测算顺利 🔮」

> **注意**：话术避免「购买」「付款」等词，改用「获取」「换取」，规避平台风险。

---

## 五、技术方案

### 5.1 技术栈选型

| 层级     | 技术选型                    | 选择理由                    |
| ------ | ----------------------- | ----------------------- |
| 前端框架   | Vue 3 + Vite            | 轻量快速，适合单页 H5            |
| UI 组件库 | Vant（移动端）               | 专为手机 H5 设计，组件丰富         |
| 图片生成   | html2canvas             | 前端 Canvas 渲染分享卡片，零服务器成本 |
| 后端框架   | Node.js + Express       | 轻量，JS 全栈，降低维护成本         |
| 数据库    | Supabase（PostgreSQL）    | 免费额度充裕，自带 REST API      |
| 大模型    | DeepSeek V3（首选）         | 价格极低，中文理解优秀，国内访问稳定      |
| 部署     | Vercel（前端）+ Railway（后端） | 免费额度支撑早期流量              |

### 5.2 国产大模型对比

| 模型             | 价格（per 1M tokens） | 中文质量  | 推荐指数     |
| -------------- | ----------------- | ----- | -------- |
| DeepSeek V3    | 约 ¥1 输入 / ¥2 输出   | ⭐⭐⭐⭐⭐ | ★★★★★ 首选 |
| DeepSeek R1    | 约 ¥4 / ¥16        | ⭐⭐⭐⭐⭐ | 可用于复杂分析  |
| 通义千问 Turbo     | 约 ¥3 / ¥3         | ⭐⭐⭐⭐  | ★★★★ 备选  |
| Kimi（Moonshot） | 约 ¥12 / ¥12       | ⭐⭐⭐⭐  | ★★★ 备选   |

> **推荐**：主力使用 DeepSeek V3，单次报告 API 调用成本约 ¥0.003-0.008，比 GPT 类模型便宜约 20 倍。

### 5.3 AI 报告生成策略（规则 + 大模型混合）

#### 规则引擎（结构化计算）

- 输入生日 → 计算八字（天干地支）
- 五行属性判断（金木水火土）
- 查相合关系表：六合、三合、相冲、相克矩阵
- 输出：缘分得分（50-99）、五行关系标签、各模块冲克 flag

#### 大模型（自然语言生成）

规则引擎输出的结构化数据 + 用户问卷答案拼装成 Prompt，大模型生成：缘分亮点文案 / 相处建议 / 专属姻缘签 / 隐患预警 / 分享文案。

**Prompt 模板核心结构：**

```
系统提示：你是一位精通八字合婚的命理师，擅长用现代年轻人听得懂的语言解读命盘。
用户输入：[八字数据] + [五行关系] + [缘分得分] + [问卷答案]
请输出 JSON：{ highlights: [], advice: [], sign: '', warning: '', timing: '' }
```

### 5.4 核心 API 接口

| 接口 | 方法 | 说明 | 需要激活码 |
|------|------|------|------------|
| `/api/code/verify` | POST | 校验激活码有效性，返回类型和剩余次数 | 否 |
| `/api/calculate` | POST | 提交生日+问卷，生成免费报告 | 是 |
| `/api/report/full` | POST | 完整码专属：获取隐患预警+最佳时机 | 是（完整码） |
| `/api/admin/codes/generate` | POST | 批量生成激活码 | 管理员 Token |
| `/api/admin/codes/list` | GET | 查看所有激活码状态 | 管理员 Token |

### 5.5 页面路由

| 路由 | 页面 | 说明 |
|------|------|------|
| `/` | 首页/落地页 | 产品介绍 + 激活码输入入口 |
| `/activate` | 激活码输入页 | 输入码 → 验证 → 进入测算 |
| `/input` | 信息输入页 | Step1 生日 + Step2 问卷 |
| `/loading` | 测算中 | 动效等待页，3-5 秒 |
| `/result` | 报告页 | 完整免费报告 + 付费内容引导 |
| `/admin` | 运营后台 | 密码保护，激活码生成和管理 |

---

## 六、成本估算

### 6.1 单用户成本（DeepSeek V3）

| 成本项 | 单次估算 | 说明 |
|--------|----------|------|
| 大模型 API | 约 ¥0.003 - ¥0.008 | 约 800 tokens 输入 + 600 tokens 输出 |
| 图片卡片生成 | ¥0 | 前端 Canvas 渲染 |
| 服务器/CDN | 约 ¥0.003 | 按流量极小分摊 |
| **合计（免费用户）** | **约 ¥0.006 - ¥0.011 / 次** | 比 GPT 方案降低约 15-20 倍 |
| 完整版利润 | ¥9.9 - ¥0.03 ≈ **¥9.87** | 3 次使用成本约 ¥0.03，利润率极高 |

### 6.2 限流策略

- 每个激活码限制使用次数，从源头控制成本
- 无激活码则无法使用，杜绝刷接口
- 管理端可随时作废异常激活码

---

## 七、小红书运营策略

### 7.1 内容投放方向

- 「我用八字算了我和男友的缘分，姻缘签把我看哭了」— 截图分享卡片 + 签文
- 「测出缘分 92% 的，现在在一起了」— 真实故事感，增加可信度
- 「评论区留言抽体验码」— 互动引流
- 七夕、情人节、520 节点前一周重点发布

### 7.2 裂变设计

- 专属姻缘签每条都是独特的「命运句子」，让人忍不住截图发出去
- 分享卡片自带二维码，看到的人扫码 → 需要激活码 → 去找运营者要 → 自然沉淀私域
- 「分享给对象一起测」引导双人参与，二次传播

---

## 八、开发排期

| 阶段 | 时间 | 核心任务 |
|------|------|----------|
| Phase 1 · MVP | 第 1-2 周 | 激活码系统 + 输入流程 + 规则引擎八字计算 + 静态报告页 |
| Phase 2 · AI 接入 | 第 3 周 | 接入 DeepSeek API + 分享图片卡片功能 |
| Phase 3 · 运营后台 | 第 4 周 | 激活码管理后台 + 付费墙逻辑 |
| Phase 4 · 上线运营 | 第 5 周起 | 小红书内容发布 + 激活码发放 + 持续迭代 |

---

## 九、风险提示

- **合规风险**：产品描述包装为「基于传统文化的娱乐性人格分析工具」，页面加免责声明「本报告仅供娱乐参考」
- **激活码安全**：设置使用次数上限并记录使用 IP，防止一个码被多人共享
- **大模型输出质控**：对输出做关键词过滤，避免极端负面内容；JSON 格式输出便于校验
- **小红书交易风险**：话术避免「购买」「付款」等词，改用「获取」「换取」；做好买家截图记录

---

*文档结束 · v1.1*
